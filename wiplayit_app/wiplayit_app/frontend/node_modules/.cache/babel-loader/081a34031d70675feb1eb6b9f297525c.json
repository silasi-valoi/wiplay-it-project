{"ast":null,"code":"var _jsxFileName = \"/home/silasi/Deprojectos/javascript_projects/wiplay-it-web-frontend/src/containers/authentication/index.js\";\nimport React from 'react';\nimport { DefaultWrongPage } from \"components/partial_components\";\nimport Axios from 'axios_instance';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { FORM_CHANGE, LOGIN_USER, CREATE_USER, PASSWORD_REST } from 'actions/types';\nimport * as action from 'actions/actionCreators';\nimport { store } from 'index';\nimport Api from 'api';\nimport Helper from 'containers/utils/helpers';\nimport { getCurrentUser } from 'dispatch/index';\nconst helper = new Helper();\nconst api = new Api();\nexport function withAuthentication(Component) {\n  var _temp;\n\n  return _temp = class Authentication extends React.Component {\n    constructor(_props) {\n      super(_props);\n\n      this.onStoreUpdate = () => {};\n\n      this.responseTwitter = response => {\n        console.log(response); //var accessToken =  response.accessToken\n        //var apiUrl =  api.twitterLoginApi(this)\n        //this.socialLogin(apiUrl, accessToken)\n      };\n\n      this.responseGoogle = response => {\n        console.log(response); //var accessToken =  response.accessToken\n        //var apiUrl =  api.googleLoginApi(this)\n        //this.socialLogin(apiUrl, accessToken)\n      };\n\n      this.toggleSignUpForm = props => {\n        console.log(props);\n        console.log(props, this.props);\n        this.props.toggleSignUp(props);\n        this.forceUpdate();\n      };\n\n      this.togglePasswordResetForm = props => {\n        console.log(props, this.props);\n        this.props.togglePasswordReset(props);\n        this.forceUpdate();\n      };\n\n      this.getAuthUrl = formValues => {\n        if (formValues.email && formValues.password && !formValues.password2 && !formValues.first_name) {\n          return api.logginUser();\n        } else if (formValues.first_name && formValues.last_name) {\n          return api.createUser();\n        } else if (formValues.password2 && formValues.password1) {\n          return api.passwordChangeApi();\n        } else {\n          return api.passwordResetApi();\n        }\n      };\n\n      this.onSubmit = (values, dispatch) => {\n        const axiosApi = new Axios();\n        var state = this.props.state;\n        let apiUrl = this.getAuthUrl(values);\n        console.log(this.getAuthUrl(values));\n        let tokenKey = null;\n        let with_token = false;\n        const instance = axiosApi.axiosInstance(false);\n        store.dispatch(action.authenticationPending());\n        return instance.post(apiUrl, values).then(response => dispatch(action.authenticationSuccess(response.data))).catch(error => {\n          if (error.response && error.response.data) {\n            dispatch(action.authenticationError(error.response.data));\n          } else if (error.request) {\n            dispatch(action.handleError());\n          }\n        });\n      };\n\n      this.state = {\n        isAuthenticated: false\n      };\n      this.onSubmit = this.onSubmit.bind(this);\n      this.responseFacebook = this.responseFacebook.bind(this);\n      this.responseTwitter = this.responseTwitter.bind(this);\n      this.responseGoogle = this.responseGoogle.bind(this);\n    }\n\n    isAuthenticated() {\n      return localStorage.getItem('auth') ? true : false;\n    }\n\n    responseFacebook(response) {\n      //console.log(response.accessToken);\n      var accessToken = response.accessToken;\n      var formData = new FormData();\n      console.log(accessToken);\n      formData.append(\"access_token\", accessToken);\n      var apiUrl = api.facebookLoginApi(this); //this.sendRequest(apiUrl, formData)\n    }\n\n    componentDidMount() {\n      const onStoreChange = () => {\n        let storeUpdate = store.getState();\n        let cachedEntyties = JSON.parse(localStorage.getItem('@@CachedEntyties'));\n        let stateEntytnties = storeUpdate.entyties;\n        console.log(cachedEntyties, stateEntytnties);\n        let currentUser = cachedEntyties.currentUser;\n        let userAuth = stateEntytnties.userAuth;\n\n        if (userAuth.auth && userAuth.auth.isLoggedIn && !currentUser) {\n          store.dispatch(getCurrentUser(userAuth.auth.tokenKey));\n          setTimeout(() => {\n            this.props.history.push('/');\n          }, 1000);\n        }\n      };\n\n      this.unsubscribe = store.subscribe(onStoreChange);\n    }\n\n    componentWillUnmount() {\n      this.unsubscribe();\n    }\n\n    UNSAFE_componentWillReceiveProps(nextProps) {\n      /*\n      let  userAuth = store.getState().userAuth;\n      let cachedEntyties = JSON.parse(localStorage.getItem('@@CachedEntyties'));\n       console.log(cachedEntyties, userAuth)\n       let { currentUser }  = cachedEntyties;\n       if (userAuth.auth.isLoggedIn && !currentUser) {\n          let isOnStorage = localStorage.getItem('auth' )?true : false;\n           if (isOnStorage) {\n             let auth = JSON.parse(localStorage.getItem('auth'))\n             store.dispatch(getCurrentUser(auth.tokenKey));\n             currentUser = localStorage.getItem('currentUser')?true:false;\n               if (currentUser) {\n                  setTimeout( () => {\n                   this.props.history.push('/');\n                   this.setState({isAuthenticated:currentUser })\n                }, 100);\n              }\n          }\n      }    */\n    }\n\n    componentDidUpdate(nextProps, prevState) {}\n\n    getProps() {\n      let props = {\n        onSubmit: this.onSubmit,\n        responseFacebook: this.responseFacebook,\n        responseGoogle: this.responseGoogle,\n        responseTwitter: this.responseTwitter,\n        togglePasswordResetForm: this.togglePasswordResetForm,\n        toggleSignUpForm: this.toggleSignUpForm\n      };\n      return Object.assign(props, this.props);\n    }\n\n    render() {\n      let props = this.getProps();\n      console.log(props);\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }, this.isAuthenticated() ? React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221\n        },\n        __self: this\n      }, React.createElement(DefaultWrongPage, Object.assign({}, props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      }))) : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }, React.createElement(Component, Object.assign({}, props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }))));\n    }\n\n  }, _temp;\n} //binds on `props` change\n\nconst mapDispatchToProps = (dispatch, ownProps) => {\n  return {\n    togglePasswordReset: (self, props) => dispatch(action.togglePasswordResetForm(self, props)),\n    toggleSignUp: (self, props) => dispatch(action.toggleSignUpForm(self, props))\n  };\n};\n\nconst mapStateToProps = (state, ownProps) => {\n  return {\n    userAuth: state.userAuth\n  };\n};\n\nconst composedHoc = compose(connect(mapStateToProps, mapDispatchToProps), withAuthentication);\nexport default composedHoc;","map":{"version":3,"sources":["/home/silasi/Deprojectos/javascript_projects/wiplay-it-web-frontend/src/containers/authentication/index.js"],"names":["React","DefaultWrongPage","Axios","connect","compose","FORM_CHANGE","LOGIN_USER","CREATE_USER","PASSWORD_REST","action","store","Api","Helper","getCurrentUser","helper","api","withAuthentication","Component","Authentication","constructor","props","onStoreUpdate","responseTwitter","response","console","log","responseGoogle","toggleSignUpForm","toggleSignUp","forceUpdate","togglePasswordResetForm","togglePasswordReset","getAuthUrl","formValues","email","password","password2","first_name","logginUser","last_name","createUser","password1","passwordChangeApi","passwordResetApi","onSubmit","values","dispatch","axiosApi","state","apiUrl","tokenKey","with_token","instance","axiosInstance","authenticationPending","post","then","authenticationSuccess","data","catch","error","authenticationError","request","handleError","isAuthenticated","bind","responseFacebook","localStorage","getItem","accessToken","formData","FormData","append","facebookLoginApi","componentDidMount","onStoreChange","storeUpdate","getState","cachedEntyties","JSON","parse","stateEntytnties","entyties","currentUser","userAuth","auth","isLoggedIn","setTimeout","history","push","unsubscribe","subscribe","componentWillUnmount","UNSAFE_componentWillReceiveProps","nextProps","componentDidUpdate","prevState","getProps","Object","assign","render","mapDispatchToProps","ownProps","self","mapStateToProps","composedHoc"],"mappings":"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","sourcesContent":["import React from 'react';\n\nimport {DefaultWrongPage} from \"components/partial_components\"\nimport Axios from 'axios_instance';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { FORM_CHANGE, LOGIN_USER, CREATE_USER,PASSWORD_REST } from 'actions/types';\nimport  * as action  from 'actions/actionCreators';\n\nimport { store } from 'index';\nimport Api from 'api';\nimport Helper from 'containers/utils/helpers';\nimport { getCurrentUser } from 'dispatch/index';\n           \n\n\n\nconst helper   = new Helper();\nconst api = new Api();\n\n\n\n\n\nexport function withAuthentication(Component) {\n\n   return class Authentication extends React.Component {\n\n      constructor(props) {\n         super(props);\n         this.state = {\n            isAuthenticated : false,\n         };\n\n         this.onSubmit            = this.onSubmit.bind(this);\n         this.responseFacebook    = this.responseFacebook.bind(this);\n         this.responseTwitter     = this.responseTwitter.bind(this);\n         this.responseGoogle      = this.responseGoogle.bind(this);     \n      }\n\n\n      isAuthenticated() {\n         return localStorage.getItem('auth' )?true : false;\n      }\n\n    responseFacebook(response) {\n        //console.log(response.accessToken);\n        var accessToken =  response.accessToken\n        var formData = new FormData();\n        console.log(accessToken)\n          \n        formData.append(\"access_token\",accessToken);\n      \n        var apiUrl =  api.facebookLoginApi(this)\n\n        //this.sendRequest(apiUrl, formData)\n              \n      }\n\n\n      onStoreUpdate = () =>{\n         \n         \n    };\n\n\n    componentDidMount() {\n        const onStoreChange = () => {\n        let storeUpdate = store.getState();\n        let cachedEntyties = JSON.parse(localStorage.getItem('@@CachedEntyties'));\n        let stateEntytnties = storeUpdate.entyties;\n        console.log(cachedEntyties, stateEntytnties)\n \n        let { currentUser }  = cachedEntyties;\n        let { userAuth }     = stateEntytnties;\n\n        if (userAuth.auth && userAuth.auth.isLoggedIn && !currentUser) {\n            store.dispatch(getCurrentUser(userAuth.auth.tokenKey));\n\n            setTimeout( () => {\n                this.props.history.push('/');\n            }, 1000);\n        }\n       };\n\n        this.unsubscribe = store.subscribe(onStoreChange);\n                    \n      };\n\n\n      componentWillUnmount() {\n        this.unsubscribe();\n\n      };\n\n\n    UNSAFE_componentWillReceiveProps(nextProps){\n        /*\n        let  userAuth = store.getState().userAuth;\n        let cachedEntyties = JSON.parse(localStorage.getItem('@@CachedEntyties'));\n\n        console.log(cachedEntyties, userAuth)\n\n        let { currentUser }  = cachedEntyties;\n\n        if (userAuth.auth.isLoggedIn && !currentUser) {\n            let isOnStorage = localStorage.getItem('auth' )?true : false;\n\n            if (isOnStorage) {\n               let auth = JSON.parse(localStorage.getItem('auth'))\n               store.dispatch(getCurrentUser(auth.tokenKey));\n               currentUser = localStorage.getItem('currentUser')?true:false;\n\n                if (currentUser) {\n                    setTimeout( () => {\n                     this.props.history.push('/');\n                     this.setState({isAuthenticated:currentUser })\n                  }, 100);\n                }\n            }\n        }    */   \n    };\n\n    componentDidUpdate(nextProps, prevState){\n       \n      };\n\n      responseTwitter = (response) => {\n         console.log(response);\n         //var accessToken =  response.accessToken\n      \n        //var apiUrl =  api.twitterLoginApi(this)\n        //this.socialLogin(apiUrl, accessToken)\n\n               \n      }\n\n\n      responseGoogle = (response)=> {\n         console.log(response);\n         //var accessToken =  response.accessToken\n         //var apiUrl =  api.googleLoginApi(this)\n         //this.socialLogin(apiUrl, accessToken)\n      };\n\n      toggleSignUpForm = (props)=>{\n         console.log(props)\n          console.log(props, this.props)\n         this.props.toggleSignUp(props)\n         this.forceUpdate()\n      }\n\n    togglePasswordResetForm = (props)=>{\n        console.log(props, this.props)\n        this.props.togglePasswordReset(props)\n        this.forceUpdate()\n    };\n      \n      \n    getAuthUrl = (formValues)=>{\n        \t\n       \tif (formValues.email && formValues.password &&\n            !formValues.password2 && !formValues.first_name){\n\n       \t\treturn api.logginUser();\n       \t}\n        \t\n       \telse if (formValues.first_name && formValues.last_name){\n       \t\treturn api.createUser();\n       \t}\n       \telse if (formValues.password2 && formValues.password1){\n       \t\treturn api.passwordChangeApi();\n       \t} \n        \t\n       \telse{\n            return  api.passwordResetApi();\n    \t}\n    };\n\n    onSubmit = (values, dispatch) => {\n        const axiosApi = new Axios();\n        var state = this.props.state;\n        let apiUrl =  this.getAuthUrl(values);\n        console.log(this.getAuthUrl(values))\n        let tokenKey   = null;\n        let with_token = false;\n        const instance = axiosApi.axiosInstance(false);\n        store.dispatch(action.authenticationPending()) \n         \n        return  instance.post(apiUrl, values)\n            .then(response => dispatch(action.authenticationSuccess(response.data)))\n            .catch(error =>{\n                if (error.response && error.response.data) {\n                    dispatch(action.authenticationError(error.response.data));\n                  }else if (error.request) {\n                     dispatch(action.handleError())\n                  }\n               }); \n      }\n      \n      getProps() {\n        let  props = {\n            onSubmit : this.onSubmit, \n            responseFacebook        : this.responseFacebook,\n            responseGoogle          : this.responseGoogle,\n            responseTwitter         : this.responseTwitter,\n            togglePasswordResetForm : this.togglePasswordResetForm, \n            toggleSignUpForm        : this.toggleSignUpForm,\n        };\n         \n        return Object.assign(props, this.props);\n      }\n    \n\n      render() {\n         let props = this.getProps(); \n         console.log(props)\n         return (\n            <div>\n               {this.isAuthenticated()?\n                  <div>\n                     <DefaultWrongPage {...props}/>\n                  </div>\n                  :\n                  <div>\n                     <Component {...props}/>\n                  </div>  \n               }\n\n            </div>\n         );\n      }\n   }\n}\n\n\n//binds on `props` change\nconst mapDispatchToProps = (dispatch, ownProps) => {\n     \n   return {\n     togglePasswordReset  : (self , props)    => dispatch(action.togglePasswordResetForm(self, props)),\n     toggleSignUp         : (self , props)    => dispatch(action.toggleSignUpForm(self , props)),\n     \n   }\n\n};\n\n\n\n\nconst mapStateToProps = (state, ownProps) => {\n   return {\n      userAuth : state.userAuth,\n      \n   }\n};\n\nconst composedHoc = compose( connect(mapStateToProps, mapDispatchToProps),withAuthentication )\n\n\nexport default  composedHoc;\n  \n\n\n"]},"metadata":{},"sourceType":"module"}