{"ast":null,"code":"import axios from 'axios';\nlet API_URL = 'http://127.0.0.1:8000';\nlet MobileAPI_URL = 'http://192.168.43.14:8000';\nexport default class Axios {\n  constructor(props) {\n    this.cachedEntyties = JSON.parse(localStorage.getItem('@@CachedEntyties'));\n    this.withAuthentication = props;\n    this.baseURL = API_URL; //this.MobileAPI_URL  =  'http://192.168.43.14:3000'\n  }\n\n  getTokenKey() {\n    if (this.cachedEntyties) {\n      var auth = this.cachedEntyties.auth;\n\n      if (auth && auth.tokenKey) {\n        return auth.tokenKey;\n      }\n    }\n\n    return null;\n  }\n\n  axiosInstance() {\n    let baseURL = API_URL;\n\n    if (window.navigator.platform === 'Linux armv7l') {\n      baseURL = MobileAPI_URL;\n    }\n\n    var instance = axios.create({\n      baseURL: baseURL\n    });\n\n    if (this.withAuthentication) {\n      //retrive token from storage\n      var tokenKey = this.getTokenKey();\n\n      if (tokenKey) {\n        tokenKey = \"Token \".concat(tokenKey);\n        instance.defaults.headers.common['Authorization'] = tokenKey;\n      }\n    }\n\n    instance.defaults.timeout = 30000;\n    return instance;\n  }\n\n}\n;","map":{"version":3,"sources":["/home/silasi/Deprojectos/python_projects/wiplay-it-project/wiplayit_app/frontend/src/axios_instance.js"],"names":["axios","API_URL","MobileAPI_URL","Axios","constructor","props","cachedEntyties","JSON","parse","localStorage","getItem","withAuthentication","baseURL","getTokenKey","auth","tokenKey","axiosInstance","window","navigator","platform","instance","create","defaults","headers","common","timeout"],"mappings":"AACA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,IAAIC,OAAO,GAAG,uBAAd;AACA,IAAIC,aAAa,GAAG,2BAApB;AAMA,eAAe,MAAMC,KAAN,CAAY;AAEvBC,EAAAA,WAAW,CAACC,KAAD,EAAO;AACd,SAAKC,cAAL,GAAsBC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,kBAArB,CAAX,CAAtB;AACA,SAAKC,kBAAL,GAA0BN,KAA1B;AACA,SAAKO,OAAL,GAAuBX,OAAvB,CAHc,CAId;AACH;;AAEDY,EAAAA,WAAW,GAAE;AAET,QAAI,KAAKP,cAAT,EAAyB;AAAA,UAChBQ,IADgB,GACP,KAAKR,cADE,CAChBQ,IADgB;;AAGrB,UAAIA,IAAI,IAAIA,IAAI,CAACC,QAAjB,EAA2B;AACvB,eAAOD,IAAI,CAACC,QAAZ;AACH;AACJ;;AAED,WAAO,IAAP;AACH;;AAGDC,EAAAA,aAAa,GAAE;AACX,QAAIJ,OAAO,GAAGX,OAAd;;AAEH,QAAGgB,MAAM,CAACC,SAAP,CAAiBC,QAAjB,KAA8B,cAAjC,EAAgD;AACzCP,MAAAA,OAAO,GAAIV,aAAX;AAEH;;AAED,QAAIkB,QAAQ,GAAGpB,KAAK,CAACqB,MAAN,CAAa;AACxBT,MAAAA,OAAO,EAAEA;AADe,KAAb,CAAf;;AAIA,QAAI,KAAKD,kBAAT,EAA6B;AACzB;AACA,UAAII,QAAQ,GAAG,KAAKF,WAAL,EAAf;;AAEA,UAAIE,QAAJ,EAAc;AACVA,QAAAA,QAAQ,mBAAWA,QAAX,CAAR;AACAK,QAAAA,QAAQ,CAACE,QAAT,CAAkBC,OAAlB,CAA0BC,MAA1B,CAAiC,eAAjC,IAAoDT,QAApD;AACH;AACJ;;AAEDK,IAAAA,QAAQ,CAACE,QAAT,CAAkBG,OAAlB,GAA4B,KAA5B;AACA,WAAOL,QAAP;AACH;;AA/CsB;AAiD1B","sourcesContent":["\nimport axios from 'axios';\n\nlet API_URL = 'http://127.0.0.1:8000';\nlet MobileAPI_URL = 'http://192.168.43.14:8000'\n\n\n  \n  \n\nexport default class Axios {\n\n    constructor(props){\n        this.cachedEntyties = JSON.parse(localStorage.getItem('@@CachedEntyties'));\n        this.withAuthentication = props;\n        this.baseURL        =  API_URL;\n        //this.MobileAPI_URL  =  'http://192.168.43.14:3000'\n    }\n\n    getTokenKey(){\n        \n        if (this.cachedEntyties) {\n            var {auth } = this.cachedEntyties\n\n            if (auth && auth.tokenKey) {\n                return auth.tokenKey\n            }\n        }\n\n        return null;\n    };\n\n\n    axiosInstance(){\n       \tlet baseURL = API_URL;\n        \n    \tif(window.navigator.platform === 'Linux armv7l'){\n            baseURL =  MobileAPI_URL;\n                  \n        }\n\n        var instance = axios.create({\n            baseURL: baseURL,\n        });\n\n        if (this.withAuthentication) {\n            //retrive token from storage\n            var tokenKey = this.getTokenKey();\n         \n            if (tokenKey) {\n                tokenKey =`Token ${tokenKey}`;\n                instance.defaults.headers.common['Authorization'] = tokenKey;\n            }\n        }\n\n        instance.defaults.timeout = 30000;\n        return instance;\n    };\n\n};\n\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}